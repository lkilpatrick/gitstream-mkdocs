<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of gitStream."><meta name=author content="Ofer Affias"><link href=../context-variables/ rel=prev><link href=../automation-actions/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>Filter functions - gitStream</title><link rel=stylesheet href=../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-PPEJMF05RD"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-PPEJMF05RD",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-PPEJMF05RD",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#filter-functions class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=gitStream class="md-header__button md-logo" aria-label=gitStream data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> gitStream </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Filter functions </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=gitStream class="md-nav__button md-logo" aria-label=gitStream data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> gitStream </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 tabindex=0 aria-expanded=false> Getting started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../github-installation/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../github-app-setup/ class=md-nav__link> GitHub app setup </a> </li> <li class=md-nav__item> <a href=../how-it-works/ class=md-nav__link> How it works </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ class=md-nav__link> Examples </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 tabindex=0 aria-expanded=true> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../editing-cm-file/ class=md-nav__link> Editing the .cm file </a> </li> <li class=md-nav__item> <a href=../context-variables/ class=md-nav__link> Context variables </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Filter functions <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Filter functions </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#low-level-functions class=md-nav__link> Low level functions </a> </li> <li class=md-nav__item> <a href=#high-level-functions class=md-nav__link> High level functions </a> </li> <li class=md-nav__item> <a href=#named-arguments class=md-nav__link> Named arguments </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#every class=md-nav__link> every </a> </li> <li class=md-nav__item> <a href=#filter class=md-nav__link> filter </a> </li> <li class=md-nav__item> <a href=#includes class=md-nav__link> includes </a> </li> <li class=md-nav__item> <a href=#map class=md-nav__link> map </a> </li> <li class=md-nav__item> <a href=#match class=md-nav__link> match </a> </li> <li class=md-nav__item> <a href=#nope class=md-nav__link> nope </a> </li> <li class=md-nav__item> <a href=#reject class=md-nav__link> reject </a> </li> <li class=md-nav__item> <a href=#some class=md-nav__link> some </a> </li> <li class=md-nav__item> <a href=#alldocs class=md-nav__link> allDocs </a> </li> <li class=md-nav__item> <a href=#allimages class=md-nav__link> allImages </a> </li> <li class=md-nav__item> <a href=#alltests class=md-nav__link> allTests </a> </li> <li class=md-nav__item> <a href=#estimatedreviewtime class=md-nav__link> estimatedReviewTime </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> extensions </a> </li> <li class=md-nav__item> <a href=#isformattingchange class=md-nav__link> isFormattingChange </a> </li> <li class=md-nav__item> <a href=#matchdifflines class=md-nav__link> matchDiffLines </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../automation-actions/ class=md-nav__link> Automation actions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#low-level-functions class=md-nav__link> Low level functions </a> </li> <li class=md-nav__item> <a href=#high-level-functions class=md-nav__link> High level functions </a> </li> <li class=md-nav__item> <a href=#named-arguments class=md-nav__link> Named arguments </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#every class=md-nav__link> every </a> </li> <li class=md-nav__item> <a href=#filter class=md-nav__link> filter </a> </li> <li class=md-nav__item> <a href=#includes class=md-nav__link> includes </a> </li> <li class=md-nav__item> <a href=#map class=md-nav__link> map </a> </li> <li class=md-nav__item> <a href=#match class=md-nav__link> match </a> </li> <li class=md-nav__item> <a href=#nope class=md-nav__link> nope </a> </li> <li class=md-nav__item> <a href=#reject class=md-nav__link> reject </a> </li> <li class=md-nav__item> <a href=#some class=md-nav__link> some </a> </li> <li class=md-nav__item> <a href=#alldocs class=md-nav__link> allDocs </a> </li> <li class=md-nav__item> <a href=#allimages class=md-nav__link> allImages </a> </li> <li class=md-nav__item> <a href=#alltests class=md-nav__link> allTests </a> </li> <li class=md-nav__item> <a href=#estimatedreviewtime class=md-nav__link> estimatedReviewTime </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> extensions </a> </li> <li class=md-nav__item> <a href=#isformattingchange class=md-nav__link> isFormattingChange </a> </li> <li class=md-nav__item> <a href=#matchdifflines class=md-nav__link> matchDiffLines </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=filter-functions>Filter functions</h1> <p>Filters can change the look and format of the source data, or even generate new data derived from the input values. What's important is that the original data is replaced by the result of transformations, and that's what ends up in rendered templates.</p> <h2 id=overview>Overview</h2> <p>The following functions are supported in addition to the built-in functions provided by <a href=https://mozilla.github.io/nunjucks/templating.html#builtin-filters>Nunjucks</a>.</p> <h3 id=low-level-functions>Low level functions</h3> <div class=big-summary> <table> <thead> <tr> <th>Function</th> <th>Input</th> <th>Args</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td><a href=#every><code>every</code></a><br>Checks whether all element in the list are <code>true</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#filter><code>filter</code></a><br>Reduce list of items into a list of same items that match the specified term</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code>, <code>attr</code></td> <td>[String]<br>[Object]</td> </tr> <tr> <td><a href=#match><code>includes</code></a><br>Check if substring match</td> <td>String</td> <td><code>regex</code>, <code>term</code>, <code>list</code></td> <td>Bool</td> </tr> <tr> <td><a href=#map><code>map</code></a><br>Maps each object in a list into their specified attribute value</td> <td>[Object]</td> <td><code>attr</code></td> <td>[Object]</td> </tr> <tr> <td><a href=#match><code>match</code></a><br>Maps list of items into a list of booleans that match the specified term</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code> <code>attr</code></td> <td>[Bool]</td> </tr> <tr> <td><a href=#nope><code>nope</code></a><br>Checks whether all element in the list are <code>false</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#reject><code>reject</code></a><br>Inverse of <a href=#filter><code>filter</code></a>, the result list contains non-matching items</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code>, <code>attr</code></td> <td>[String]<br>[Object]</td> </tr> <tr> <td><a href=#some><code>some</code></a><br>Checks whether at least one element in the list is <code>true</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> </tbody> </table> </div> <h3 id=high-level-functions>High level functions</h3> <div class=big-summary> <table> <thead> <tr> <th>Function</th> <th>Input</th> <th>Args</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td><a href=#alldocs><code>allDocs</code></a><br>Checks the list includes only documents</td> <td><a href=../context-variables/#files>files</a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#allimages><code>allImages</code></a><br>Checks the list includes only images</td> <td><a href=../context-variables/#files>files</a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#alltests><code>allTests</code></a><br>Checks the list includes only tests</td> <td><a href=../context-variables/#files>files</a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#estimatedreviewtime><code>estimatedReviewTime</code></a><br>Estimated review time in minutes</td> <td><a href=../context-variables/#branch-context>branch</a></td> <td>-</td> <td>Integer</td> </tr> <tr> <td><a href=#extensions><code>extensions</code></a><br>Lists all the unique file extensions</td> <td>[String]</td> <td>-</td> <td>[String]</td> </tr> <tr> <td><a href=#isformattingchange><code>isFormattingChange</code></a><br>Checks that only formatting changed</td> <td>[<a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#matchdifflines><code>matchDiffLines</code></a><br>Match every line in diff</td> <td>[<a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>]</td> <td><code>regex</code>, <code>ignoreWhiteSpaces</code></td> <td>[Bool]</td> </tr> </tbody> </table> </div> <h3 id=named-arguments>Named arguments</h3> <p>Some functions supports named arguments, many of these repeat in different functions.</p> <p><code>term</code> - a single string, used as substring to match with the matched item.</p> <p><code>list</code> - a list of strings, trying to match any of the listed substrings with the matched item.</p> <p><code>regex</code> - a single string, used as <em>regular expression</em> to with the matched item. A regular expression can be created just like JavaScript, but needs to be prefixed with r, for example <code>r/^foo.*/g</code>, for more info see <a href=https://mozilla.github.io/nunjucks/templating.html#regular-expressions>Nunjucks</a>. </p> <p><code>globs</code> - a key to an element in the <code>.cm</code> that holds a list of strings, used as <em>glob</em> pattern test on the matched item. For more info see <a href=https://en.wikipedia.org/wiki/Glob_(programming)>Wikipedia</a>.</p> <p><code>attr</code> - a key in the element to use when doing the requested operation.</p> <p>For example, the following expressions provide an identical result:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>^</span><span class=nv>some</span><span class=err>.</span><span class=o>*/)</span> <span class=cp>}}</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s1>&#39;some&#39;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;some&#39;</span><span class=o>])</span> <span class=cp>}}</span>
</code></pre></div> <h2 id=reference>Reference</h2> <h4 id=every><code>every</code></h4> <p>Checks whether all element in the list are <code>true</code>. In case the list of elements is empty it will return <code>false</code>.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when all list items are <code>true</code></td> </tr> </tbody> </table> <p>For example, check that all changes are in either 'src' or 'dest' directories:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=filter><code>filter</code></h4> <p>Creates a shallow copy of a portion of a given list, filtered down to just the elements that match the given term. You can use either single term, regex or a list of terms to match with.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings to match, or list of objects if <code>attr</code> is used</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match with the input items</td> </tr> <tr> <td><code>attr</code></td> <td>Input (optional)</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]<br>[Object]</td> <td>The list with only the matching items</td> </tr> </tbody> </table> <p>For example, check if all changes to JavaScript files are in tests directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>For example, check if all changes to JavaScript files are formatting:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=includes><code>includes</code></h4> <p>Determines whether a string includes a certain substring. You can use either single term, regex or a list of terms to match with.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The list of strings to match</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Substring term to match</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if search terms matches</td> </tr> </tbody> </table> <p>Check string matches either of the terms:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;any&#39;</span><span class=o>,</span> <span class=s1>&#39;thing&#39;</span><span class=o>])</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=map><code>map</code></h4> <p>Creates a new list populated with the values of the selected attribute of every element in the input list. </p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Object]</td> <td>The list of objects to map, see <a href=21_gitstream-context>context</a> for valid inputs</td> </tr> <tr> <td><code>attr</code></td> <td>Input</td> <td>String</td> <td>Object attribute to select</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Object]</td> <td>List of the selected object attributes</td> </tr> </tbody> </table> <p>For example, the <code>source.diff.files</code> context holds a list of <a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>, each has <code>new_file</code> attribute. You can create a list of all the new file names by mapping to the <code>new_file</code> attribute and then check if there are changes to any <code>handler.js</code> file:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>map</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s1>&#39;handler.js&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=match><code>match</code></h4> <p>Return <code>true</code> for each element in the list that match the search term.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings or if <code>attr</code> used the list of objects</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match</td> </tr> <tr> <td><code>attr</code></td> <td>Input</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Bool]</td> <td><code>true</code> for every matching item</td> </tr> </tbody> </table> <p>For example, to check if all code changes are in the <code>tests</code> directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>//)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>For example, to check if there are code changes with specific function call:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;diff&#39;</span><span class=o>,</span> <span class=nv>term</span><span class=o>=</span><span class=s1>&#39;myFunction&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=nope><code>nope</code></h4> <p>The inverse of <a href=#every><code>every</code></a>, checks whether all element in the list are <code>false</code>. In case the list of elements is empty it will return <code>false</code>.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when all list items are <code>false</code></td> </tr> </tbody> </table> <p>For example, check that no changes in either 'src' or 'dest' directories:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>nope</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=reject><code>reject</code></h4> <p>Creates a shallow copy of a portion of a given list, filtered down to just the elements that does <strong>not</strong> match the given term. You can use either single term, regex or a list of terms to match with.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings to match, or list of objects if <code>attr</code> is used</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match with the input items</td> </tr> <tr> <td><code>attr</code></td> <td>Input (optional)</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]<br>[Object]</td> <td>The list with only the non-matching items</td> </tr> </tbody> </table> <p>For example, check if all changes but JavaScript files are in tests directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>reject</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>//</span><span class=err>&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>For example, check if all changes except for <code>config.json</code> files are formatting:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>reject</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>config</span><span class=err>\</span><span class=nv>.json</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=some><code>some</code></h4> <p>Checks whether any element in the list is <code>true</code>. In case the list of elements is empty it will return <code>false</code>.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when any of the items is <code>true</code></td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=alldocs><code>allDocs</code></h4> <p>Return <code>true</code> if the input list includes only documents based on file extensions.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file extensions are of docs</td> </tr> </tbody> </table> <p>Doc files extensions are: <code>md</code>, <code>mkdown</code>, <code>txt</code>, <code>rst</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allDocs</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=allimages><code>allImages</code></h4> <p>Return <code>true</code> if the input list includes only images based on file extensions.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file extensions are of images</td> </tr> </tbody> </table> <p>Image file extensions are: <code>svg</code>, <code>png</code>, <code>gif</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allImages</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=alltests><code>allTests</code></h4> <p>Return <code>true</code> if the input list includes only tests based on file's path and name.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file tests based on name and path</td> </tr> </tbody> </table> <p>Test files must include the substring <code>test</code> or <code>spec</code> in its name or path.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allTests</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=estimatedreviewtime><code>estimatedReviewTime</code></h4> <p>Returns the estimated review time in minutes based on statistical model. The model uses the PR size and type of file changed to produce the estimation.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#branch><code>branch</code></a></td> <td>Branch meta data</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Integer</td> <td>the estimated time for review in minutes</td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=cp>{{</span> <span class=nv>branch</span> <span class=o>|</span> <span class=nf>estimatedReviewTime</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=extensions><code>extensions</code></h4> <p>Expects <code>files</code> and provide a list of all unique file extensions.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>List of all unique file extensions</td> </tr> </tbody> </table> <p>For example, check that only one file type was changed:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>extensions</span> <span class=o>|</span> <span class=nf>length</span> <span class=o>==</span> <span class=m>1</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=isformattingchange><code>isFormattingChange</code></h4> <p>Return <code>true</code> if all file diffs are validated as formatting changes.</p> <p>Support source code languages: JavaScript, TypeScript, JSON, YAML and HTML.</p> <p>If changes in other formats detected, the filter will return <code>false</code>.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#source><code>source.diff.files</code></a></td> <td>List of file diffs</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if the all code changes are non functional</td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=matchdifflines><code>matchDiffLines</code></h4> <p>Checks diff for matching lines.</p> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Object]</td> <td>The list of objects</td> </tr> <tr> <td><code>regex</code></td> <td>Input</td> <td>String</td> <td>Regex term to match with the input items, use <code>\\</code> for <code>\</code></td> </tr> <tr> <td><code>ignoreWhiteSpaces</code></td> <td>Input</td> <td>Bool</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Bool]</td> <td><code>true</code> for every matching object</td> </tr> </tbody> </table> <p>For example, to check if all the changes are of adding prints and ignore white spaces:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>matchDiffLines</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>^\</span><span class=o>+</span><span class=err>.</span><span class=o>*</span><span class=nv>console</span><span class=err>\</span><span class=nv>.log</span><span class=o>/,</span> <span class=nv>ignoreWhiteSpaces</span><span class=o>=</span><span class=kp>true</span><span class=o>)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["header.autohide"], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>